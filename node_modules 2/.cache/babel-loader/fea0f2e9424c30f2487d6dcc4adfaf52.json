{"ast":null,"code":"var _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n/* eslint react/no-is-mounted:0,react/sort-comp:0,react/prop-types:0 */\n\n\nimport React, { Component } from 'react';\nimport classNames from 'classnames';\nimport defaultRequest from './request';\nimport getUid from './uid';\nimport attrAccept from './attr-accept';\nimport traverseFileTree from './traverseFileTree';\n\nvar dataOrAriaAttributeProps = function dataOrAriaAttributeProps(props) {\n  return Object.keys(props).reduce(function (acc, key) {\n    if (key.substr(0, 5) === 'data-' || key.substr(0, 5) === 'aria-' || key === 'role') {\n      acc[key] = props[key];\n    }\n\n    return acc;\n  }, {});\n};\n\nvar AjaxUploader = function (_Component) {\n  _inherits(AjaxUploader, _Component);\n\n  function AjaxUploader() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, AjaxUploader);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = AjaxUploader.__proto__ || Object.getPrototypeOf(AjaxUploader)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n      uid: getUid()\n    }, _this.reqs = {}, _this.onChange = function (e) {\n      var files = e.target.files;\n\n      _this.uploadFiles(files);\n\n      _this.reset();\n    }, _this.onClick = function (e) {\n      var el = _this.fileInput;\n\n      if (!el) {\n        return;\n      }\n\n      var _this$props = _this.props,\n          children = _this$props.children,\n          onClick = _this$props.onClick;\n\n      if (children && children.type === 'button') {\n        el.parentNode.focus();\n        el.parentNode.querySelector('button').blur();\n      }\n\n      el.click();\n\n      if (onClick) {\n        onClick(e);\n      }\n    }, _this.onKeyDown = function (e) {\n      if (e.key === 'Enter') {\n        _this.onClick();\n      }\n    }, _this.onFileDrop = function (e) {\n      var multiple = _this.props.multiple;\n      e.preventDefault();\n\n      if (e.type === 'dragover') {\n        return;\n      }\n\n      if (_this.props.directory) {\n        traverseFileTree(Array.prototype.slice.call(e.dataTransfer.items), _this.uploadFiles, function (_file) {\n          return attrAccept(_file, _this.props.accept);\n        });\n      } else {\n        var files = Array.prototype.slice.call(e.dataTransfer.files).filter(function (file) {\n          return attrAccept(file, _this.props.accept);\n        });\n\n        if (multiple === false) {\n          files = files.slice(0, 1);\n        }\n\n        _this.uploadFiles(files);\n      }\n    }, _this.uploadFiles = function (files) {\n      var postFiles = Array.prototype.slice.call(files);\n      postFiles.map(function (file) {\n        file.uid = getUid();\n        return file;\n      }).forEach(function (file) {\n        _this.upload(file, postFiles);\n      });\n    }, _this.saveFileInput = function (node) {\n      _this.fileInput = node;\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(AjaxUploader, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this._isMounted = true;\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n      this.abort();\n    }\n  }, {\n    key: 'upload',\n    value: function upload(file, fileList) {\n      var _this2 = this;\n\n      var props = this.props;\n\n      if (!props.beforeUpload) {\n        // always async in case use react state to keep fileList\n        return setTimeout(function () {\n          return _this2.post(file);\n        }, 0);\n      }\n\n      var before = props.beforeUpload(file, fileList);\n\n      if (before && before.then) {\n        before.then(function (processedFile) {\n          var processedFileType = Object.prototype.toString.call(processedFile);\n\n          if (processedFileType === '[object File]' || processedFileType === '[object Blob]') {\n            return _this2.post(processedFile);\n          }\n\n          return _this2.post(file);\n        })['catch'](function (e) {\n          // eslint-disable-next-line no-console\n          console.log(e);\n        });\n      } else if (before !== false) {\n        setTimeout(function () {\n          return _this2.post(file);\n        }, 0);\n      }\n\n      return undefined;\n    }\n  }, {\n    key: 'post',\n    value: function post(file) {\n      var _this3 = this;\n\n      if (!this._isMounted) {\n        return;\n      }\n\n      var props = this.props;\n      var onStart = props.onStart,\n          onProgress = props.onProgress,\n          _props$transformFile = props.transformFile,\n          transformFile = _props$transformFile === undefined ? function (originFile) {\n        return originFile;\n      } : _props$transformFile;\n      new Promise(function (resolve) {\n        var action = props.action;\n\n        if (typeof action === 'function') {\n          action = action(file);\n        }\n\n        return resolve(action);\n      }).then(function (action) {\n        var uid = file.uid;\n        var request = props.customRequest || defaultRequest;\n        var transform = Promise.resolve(transformFile(file)).then(function (transformedFile) {\n          var data = props.data;\n\n          if (typeof data === 'function') {\n            data = data(transformedFile);\n          }\n\n          return Promise.all([transformedFile, data]);\n        })['catch'](function (e) {\n          console.error(e); // eslint-disable-line no-console\n        });\n        transform.then(function (_ref2) {\n          var _ref3 = _slicedToArray(_ref2, 2),\n              transformedFile = _ref3[0],\n              data = _ref3[1];\n\n          var requestOption = {\n            action: action,\n            filename: props.name,\n            data: data,\n            file: transformedFile,\n            headers: props.headers,\n            withCredentials: props.withCredentials,\n            method: props.method || 'post',\n            onProgress: onProgress ? function (e) {\n              onProgress(e, file);\n            } : null,\n            onSuccess: function onSuccess(ret, xhr) {\n              delete _this3.reqs[uid];\n              props.onSuccess(ret, file, xhr);\n            },\n            onError: function onError(err, ret) {\n              delete _this3.reqs[uid];\n              props.onError(err, ret, file);\n            }\n          };\n          _this3.reqs[uid] = request(requestOption);\n          onStart(file);\n        });\n      });\n    }\n  }, {\n    key: 'reset',\n    value: function reset() {\n      this.setState({\n        uid: getUid()\n      });\n    }\n  }, {\n    key: 'abort',\n    value: function abort(file) {\n      var reqs = this.reqs;\n\n      if (file) {\n        var uid = file;\n\n        if (file && file.uid) {\n          uid = file.uid;\n        }\n\n        if (reqs[uid] && reqs[uid].abort) {\n          reqs[uid].abort();\n        }\n\n        delete reqs[uid];\n      } else {\n        Object.keys(reqs).forEach(function (uid) {\n          if (reqs[uid] && reqs[uid].abort) {\n            reqs[uid].abort();\n          }\n\n          delete reqs[uid];\n        });\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _classNames;\n\n      var _props = this.props,\n          Tag = _props.component,\n          prefixCls = _props.prefixCls,\n          className = _props.className,\n          disabled = _props.disabled,\n          id = _props.id,\n          style = _props.style,\n          multiple = _props.multiple,\n          accept = _props.accept,\n          children = _props.children,\n          directory = _props.directory,\n          openFileDialogOnClick = _props.openFileDialogOnClick,\n          onMouseEnter = _props.onMouseEnter,\n          onMouseLeave = _props.onMouseLeave,\n          otherProps = _objectWithoutProperties(_props, ['component', 'prefixCls', 'className', 'disabled', 'id', 'style', 'multiple', 'accept', 'children', 'directory', 'openFileDialogOnClick', 'onMouseEnter', 'onMouseLeave']);\n\n      var cls = classNames((_classNames = {}, _defineProperty(_classNames, prefixCls, true), _defineProperty(_classNames, prefixCls + '-disabled', disabled), _defineProperty(_classNames, className, className), _classNames));\n      var events = disabled ? {} : {\n        onClick: openFileDialogOnClick ? this.onClick : function () {},\n        onKeyDown: openFileDialogOnClick ? this.onKeyDown : function () {},\n        onMouseEnter: onMouseEnter,\n        onMouseLeave: onMouseLeave,\n        onDrop: this.onFileDrop,\n        onDragOver: this.onFileDrop,\n        tabIndex: '0'\n      };\n      return React.createElement(Tag, _extends({}, events, {\n        className: cls,\n        role: 'button',\n        style: style\n      }), React.createElement('input', _extends({}, dataOrAriaAttributeProps(otherProps), {\n        id: id,\n        type: 'file',\n        ref: this.saveFileInput,\n        onClick: function onClick(e) {\n          return e.stopPropagation();\n        } // https://github.com/ant-design/ant-design/issues/19948\n        ,\n        key: this.state.uid,\n        style: {\n          display: 'none'\n        },\n        accept: accept,\n        directory: directory ? 'directory' : null,\n        webkitdirectory: directory ? 'webkitdirectory' : null,\n        multiple: multiple,\n        onChange: this.onChange\n      })), children);\n    }\n  }]);\n\n  return AjaxUploader;\n}(Component);\n\nexport default AjaxUploader;","map":{"version":3,"sources":["/Users/jasmineharris/Desktop/Elite/woto/node_modules/rc-upload/es/AjaxUploader.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","undefined","_i","Symbol","iterator","_s","next","done","push","value","err","Array","isArray","TypeError","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","Constructor","protoProps","staticProps","_defineProperty","obj","_objectWithoutProperties","keys","indexOf","_classCallCheck","instance","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","React","Component","classNames","defaultRequest","getUid","attrAccept","traverseFileTree","dataOrAriaAttributeProps","reduce","acc","substr","AjaxUploader","_Component","_ref","_temp","_this","_ret","_len","args","_key","getPrototypeOf","apply","concat","state","uid","reqs","onChange","e","files","uploadFiles","reset","onClick","el","fileInput","_this$props","children","type","parentNode","focus","querySelector","blur","click","onKeyDown","onFileDrop","multiple","preventDefault","directory","slice","dataTransfer","items","_file","accept","filter","file","postFiles","map","forEach","upload","saveFileInput","node","componentDidMount","_isMounted","componentWillUnmount","abort","fileList","_this2","beforeUpload","setTimeout","post","before","then","processedFile","processedFileType","toString","console","log","_this3","onStart","onProgress","_props$transformFile","transformFile","originFile","Promise","resolve","action","request","customRequest","transform","transformedFile","data","all","error","_ref2","_ref3","requestOption","filename","name","headers","withCredentials","method","onSuccess","ret","xhr","onError","setState","render","_classNames","_props","Tag","component","prefixCls","className","disabled","id","style","openFileDialogOnClick","onMouseEnter","onMouseLeave","otherProps","cls","events","onDrop","onDragOver","tabIndex","createElement","role","ref","stopPropagation","display","webkitdirectory"],"mappings":"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","sourcesContent":["var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/* eslint react/no-is-mounted:0,react/sort-comp:0,react/prop-types:0 */\nimport React, { Component } from 'react';\nimport classNames from 'classnames';\nimport defaultRequest from './request';\nimport getUid from './uid';\nimport attrAccept from './attr-accept';\nimport traverseFileTree from './traverseFileTree';\n\nvar dataOrAriaAttributeProps = function dataOrAriaAttributeProps(props) {\n  return Object.keys(props).reduce(function (acc, key) {\n    if (key.substr(0, 5) === 'data-' || key.substr(0, 5) === 'aria-' || key === 'role') {\n      acc[key] = props[key];\n    }\n    return acc;\n  }, {});\n};\n\nvar AjaxUploader = function (_Component) {\n  _inherits(AjaxUploader, _Component);\n\n  function AjaxUploader() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, AjaxUploader);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = AjaxUploader.__proto__ || Object.getPrototypeOf(AjaxUploader)).call.apply(_ref, [this].concat(args))), _this), _this.state = { uid: getUid() }, _this.reqs = {}, _this.onChange = function (e) {\n      var files = e.target.files;\n      _this.uploadFiles(files);\n      _this.reset();\n    }, _this.onClick = function (e) {\n      var el = _this.fileInput;\n      if (!el) {\n        return;\n      }\n      var _this$props = _this.props,\n          children = _this$props.children,\n          onClick = _this$props.onClick;\n\n      if (children && children.type === 'button') {\n        el.parentNode.focus();\n        el.parentNode.querySelector('button').blur();\n      }\n      el.click();\n      if (onClick) {\n        onClick(e);\n      }\n    }, _this.onKeyDown = function (e) {\n      if (e.key === 'Enter') {\n        _this.onClick();\n      }\n    }, _this.onFileDrop = function (e) {\n      var multiple = _this.props.multiple;\n\n\n      e.preventDefault();\n\n      if (e.type === 'dragover') {\n        return;\n      }\n\n      if (_this.props.directory) {\n        traverseFileTree(Array.prototype.slice.call(e.dataTransfer.items), _this.uploadFiles, function (_file) {\n          return attrAccept(_file, _this.props.accept);\n        });\n      } else {\n        var files = Array.prototype.slice.call(e.dataTransfer.files).filter(function (file) {\n          return attrAccept(file, _this.props.accept);\n        });\n\n        if (multiple === false) {\n          files = files.slice(0, 1);\n        }\n\n        _this.uploadFiles(files);\n      }\n    }, _this.uploadFiles = function (files) {\n      var postFiles = Array.prototype.slice.call(files);\n      postFiles.map(function (file) {\n        file.uid = getUid();\n        return file;\n      }).forEach(function (file) {\n        _this.upload(file, postFiles);\n      });\n    }, _this.saveFileInput = function (node) {\n      _this.fileInput = node;\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(AjaxUploader, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this._isMounted = true;\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n      this.abort();\n    }\n  }, {\n    key: 'upload',\n    value: function upload(file, fileList) {\n      var _this2 = this;\n\n      var props = this.props;\n\n      if (!props.beforeUpload) {\n        // always async in case use react state to keep fileList\n        return setTimeout(function () {\n          return _this2.post(file);\n        }, 0);\n      }\n\n      var before = props.beforeUpload(file, fileList);\n      if (before && before.then) {\n        before.then(function (processedFile) {\n          var processedFileType = Object.prototype.toString.call(processedFile);\n          if (processedFileType === '[object File]' || processedFileType === '[object Blob]') {\n            return _this2.post(processedFile);\n          }\n          return _this2.post(file);\n        })['catch'](function (e) {\n          // eslint-disable-next-line no-console\n          console.log(e);\n        });\n      } else if (before !== false) {\n        setTimeout(function () {\n          return _this2.post(file);\n        }, 0);\n      }\n      return undefined;\n    }\n  }, {\n    key: 'post',\n    value: function post(file) {\n      var _this3 = this;\n\n      if (!this._isMounted) {\n        return;\n      }\n      var props = this.props;\n      var onStart = props.onStart,\n          onProgress = props.onProgress,\n          _props$transformFile = props.transformFile,\n          transformFile = _props$transformFile === undefined ? function (originFile) {\n        return originFile;\n      } : _props$transformFile;\n\n\n      new Promise(function (resolve) {\n        var action = props.action;\n\n        if (typeof action === 'function') {\n          action = action(file);\n        }\n        return resolve(action);\n      }).then(function (action) {\n        var uid = file.uid;\n\n        var request = props.customRequest || defaultRequest;\n        var transform = Promise.resolve(transformFile(file)).then(function (transformedFile) {\n          var data = props.data;\n\n          if (typeof data === 'function') {\n            data = data(transformedFile);\n          }\n          return Promise.all([transformedFile, data]);\n        })['catch'](function (e) {\n          console.error(e); // eslint-disable-line no-console\n        });\n\n        transform.then(function (_ref2) {\n          var _ref3 = _slicedToArray(_ref2, 2),\n              transformedFile = _ref3[0],\n              data = _ref3[1];\n\n          var requestOption = {\n            action: action,\n            filename: props.name,\n            data: data,\n            file: transformedFile,\n            headers: props.headers,\n            withCredentials: props.withCredentials,\n            method: props.method || 'post',\n            onProgress: onProgress ? function (e) {\n              onProgress(e, file);\n            } : null,\n            onSuccess: function onSuccess(ret, xhr) {\n              delete _this3.reqs[uid];\n              props.onSuccess(ret, file, xhr);\n            },\n            onError: function onError(err, ret) {\n              delete _this3.reqs[uid];\n              props.onError(err, ret, file);\n            }\n          };\n          _this3.reqs[uid] = request(requestOption);\n          onStart(file);\n        });\n      });\n    }\n  }, {\n    key: 'reset',\n    value: function reset() {\n      this.setState({\n        uid: getUid()\n      });\n    }\n  }, {\n    key: 'abort',\n    value: function abort(file) {\n      var reqs = this.reqs;\n\n      if (file) {\n        var uid = file;\n        if (file && file.uid) {\n          uid = file.uid;\n        }\n        if (reqs[uid] && reqs[uid].abort) {\n          reqs[uid].abort();\n        }\n        delete reqs[uid];\n      } else {\n        Object.keys(reqs).forEach(function (uid) {\n          if (reqs[uid] && reqs[uid].abort) {\n            reqs[uid].abort();\n          }\n          delete reqs[uid];\n        });\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _classNames;\n\n      var _props = this.props,\n          Tag = _props.component,\n          prefixCls = _props.prefixCls,\n          className = _props.className,\n          disabled = _props.disabled,\n          id = _props.id,\n          style = _props.style,\n          multiple = _props.multiple,\n          accept = _props.accept,\n          children = _props.children,\n          directory = _props.directory,\n          openFileDialogOnClick = _props.openFileDialogOnClick,\n          onMouseEnter = _props.onMouseEnter,\n          onMouseLeave = _props.onMouseLeave,\n          otherProps = _objectWithoutProperties(_props, ['component', 'prefixCls', 'className', 'disabled', 'id', 'style', 'multiple', 'accept', 'children', 'directory', 'openFileDialogOnClick', 'onMouseEnter', 'onMouseLeave']);\n\n      var cls = classNames((_classNames = {}, _defineProperty(_classNames, prefixCls, true), _defineProperty(_classNames, prefixCls + '-disabled', disabled), _defineProperty(_classNames, className, className), _classNames));\n      var events = disabled ? {} : {\n        onClick: openFileDialogOnClick ? this.onClick : function () {},\n        onKeyDown: openFileDialogOnClick ? this.onKeyDown : function () {},\n        onMouseEnter: onMouseEnter,\n        onMouseLeave: onMouseLeave,\n        onDrop: this.onFileDrop,\n        onDragOver: this.onFileDrop,\n        tabIndex: '0'\n      };\n      return React.createElement(\n        Tag,\n        _extends({}, events, {\n          className: cls,\n          role: 'button',\n          style: style\n        }),\n        React.createElement('input', _extends({}, dataOrAriaAttributeProps(otherProps), {\n          id: id,\n          type: 'file',\n          ref: this.saveFileInput,\n          onClick: function onClick(e) {\n            return e.stopPropagation();\n          } // https://github.com/ant-design/ant-design/issues/19948\n          , key: this.state.uid,\n          style: { display: 'none' },\n          accept: accept,\n          directory: directory ? 'directory' : null,\n          webkitdirectory: directory ? 'webkitdirectory' : null,\n          multiple: multiple,\n          onChange: this.onChange\n        })),\n        children\n      );\n    }\n  }]);\n\n  return AjaxUploader;\n}(Component);\n\nexport default AjaxUploader;"]},"metadata":{},"sourceType":"module"}