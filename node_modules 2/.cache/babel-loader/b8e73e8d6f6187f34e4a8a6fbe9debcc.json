{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nimport classnames from 'classnames';\nimport getScrollBarSize from \"rc-util/es/getScrollBarSize\";\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport * as React from 'react';\nimport { addEventListener, dataToArray, getTouchParentScroll, isNumeric, removeEventListener, transformArguments, transitionEnd, transitionStr, windowIsUndefined } from './utils';\nvar currentDrawer = {};\n\nvar DrawerChild =\n/** @class */\nfunction () {\n  var DrawerChild = /*#__PURE__*/function (_React$Component) {\n    _inherits(DrawerChild, _React$Component);\n\n    var _super = _createSuper(DrawerChild);\n\n    function DrawerChild(props) {\n      var _this;\n\n      _classCallCheck(this, DrawerChild);\n\n      _this = _super.call(this, props);\n\n      _this.domFocus = function () {\n        if (_this.dom) {\n          _this.dom.focus();\n        }\n      };\n\n      _this.removeStartHandler = function (e) {\n        if (e.touches.length > 1) {\n          return;\n        }\n\n        _this.startPos = {\n          x: e.touches[0].clientX,\n          y: e.touches[0].clientY\n        };\n      };\n\n      _this.removeMoveHandler = function (e) {\n        if (e.changedTouches.length > 1) {\n          return;\n        }\n\n        var currentTarget = e.currentTarget;\n        var differX = e.changedTouches[0].clientX - _this.startPos.x;\n        var differY = e.changedTouches[0].clientY - _this.startPos.y;\n\n        if ((currentTarget === _this.maskDom || currentTarget === _this.handlerDom || currentTarget === _this.contentDom && getTouchParentScroll(currentTarget, e.target, differX, differY)) && e.cancelable) {\n          e.preventDefault();\n        }\n      };\n\n      _this.transitionEnd = function (e) {\n        var dom = e.target;\n        removeEventListener(dom, transitionEnd, _this.transitionEnd);\n        dom.style.transition = '';\n      };\n\n      _this.onKeyDown = function (e) {\n        if (e.keyCode === KeyCode.ESC) {\n          var onClose = _this.props.onClose;\n          e.stopPropagation();\n\n          if (onClose) {\n            onClose(e);\n          }\n        }\n      };\n\n      _this.onWrapperTransitionEnd = function (e) {\n        var _this$props = _this.props,\n            open = _this$props.open,\n            afterVisibleChange = _this$props.afterVisibleChange;\n\n        if (e.target === _this.contentWrapper && e.propertyName.match(/transform$/)) {\n          _this.dom.style.transition = '';\n\n          if (!open && _this.getCurrentDrawerSome()) {\n            document.body.style.overflowX = '';\n\n            if (_this.maskDom) {\n              _this.maskDom.style.left = '';\n              _this.maskDom.style.width = '';\n            }\n          }\n\n          if (afterVisibleChange) {\n            afterVisibleChange(!!open);\n          }\n        }\n      };\n\n      _this.openLevelTransition = function () {\n        var _this$props2 = _this.props,\n            open = _this$props2.open,\n            width = _this$props2.width,\n            height = _this$props2.height;\n\n        var _this$getHorizontalBo = _this.getHorizontalBoolAndPlacementName(),\n            isHorizontal = _this$getHorizontalBo.isHorizontal,\n            placementName = _this$getHorizontalBo.placementName;\n\n        var contentValue = _this.contentDom ? _this.contentDom.getBoundingClientRect()[isHorizontal ? 'width' : 'height'] : 0;\n        var value = (isHorizontal ? width : height) || contentValue;\n\n        _this.setLevelAndScrolling(open, placementName, value);\n      };\n\n      _this.setLevelTransform = function (open, placementName, value, right) {\n        var _this$props3 = _this.props,\n            placement = _this$props3.placement,\n            levelMove = _this$props3.levelMove,\n            duration = _this$props3.duration,\n            ease = _this$props3.ease,\n            showMask = _this$props3.showMask; // router 切换时可能会导至页面失去滚动条，所以需要时时获取。\n\n        _this.levelDom.forEach(function (dom) {\n          dom.style.transition = \"transform \".concat(duration, \" \").concat(ease);\n          addEventListener(dom, transitionEnd, _this.transitionEnd);\n          var levelValue = open ? value : 0;\n\n          if (levelMove) {\n            var $levelMove = transformArguments(levelMove, {\n              target: dom,\n              open: open\n            });\n            levelValue = open ? $levelMove[0] : $levelMove[1] || 0;\n          }\n\n          var $value = typeof levelValue === 'number' ? \"\".concat(levelValue, \"px\") : levelValue;\n          var placementPos = placement === 'left' || placement === 'top' ? $value : \"-\".concat($value);\n          placementPos = showMask && placement === 'right' && right ? \"calc(\".concat(placementPos, \" + \").concat(right, \"px)\") : placementPos;\n          dom.style.transform = levelValue ? \"\".concat(placementName, \"(\").concat(placementPos, \")\") : '';\n        });\n      };\n\n      _this.setLevelAndScrolling = function (open, placementName, value) {\n        var onChange = _this.props.onChange;\n\n        if (!windowIsUndefined) {\n          var right = document.body.scrollHeight > (window.innerHeight || document.documentElement.clientHeight) && window.innerWidth > document.body.offsetWidth ? getScrollBarSize(true) : 0;\n\n          _this.setLevelTransform(open, placementName, value, right);\n\n          _this.toggleScrollingToDrawerAndBody(right);\n        }\n\n        if (onChange) {\n          onChange(open);\n        }\n      };\n\n      _this.toggleScrollingToDrawerAndBody = function (right) {\n        var _this$props4 = _this.props,\n            getOpenCount = _this$props4.getOpenCount,\n            getContainer = _this$props4.getContainer,\n            showMask = _this$props4.showMask,\n            open = _this$props4.open;\n        var container = getContainer && getContainer();\n        var openCount = getOpenCount && getOpenCount(); // 处理 body 滚动\n\n        if (container && container.parentNode === document.body && showMask) {\n          var eventArray = ['touchstart'];\n          var domArray = [document.body, _this.maskDom, _this.handlerDom, _this.contentDom];\n\n          if (open && document.body.style.overflow !== 'hidden') {\n            if (right) {\n              _this.addScrollingEffect(right);\n            }\n\n            if (openCount === 1) {\n              document.body.style.overflow = 'hidden';\n            }\n\n            document.body.style.touchAction = 'none'; // 手机禁滚\n\n            domArray.forEach(function (item, i) {\n              if (!item) {\n                return;\n              }\n\n              addEventListener(item, eventArray[i] || 'touchmove', i ? _this.removeMoveHandler : _this.removeStartHandler, _this.passive);\n            });\n          } else if (_this.getCurrentDrawerSome()) {\n            // 没有弹框的状态下清除 overflow;\n            if (!openCount) {\n              document.body.style.overflow = '';\n            }\n\n            document.body.style.touchAction = '';\n\n            if (right) {\n              _this.remScrollingEffect(right);\n            } // 恢复事件\n\n\n            domArray.forEach(function (item, i) {\n              if (!item) {\n                return;\n              }\n\n              removeEventListener(item, eventArray[i] || 'touchmove', i ? _this.removeMoveHandler : _this.removeStartHandler, _this.passive);\n            });\n          }\n        }\n      };\n\n      _this.addScrollingEffect = function (right) {\n        var _this$props5 = _this.props,\n            placement = _this$props5.placement,\n            duration = _this$props5.duration,\n            ease = _this$props5.ease,\n            getOpenCount = _this$props5.getOpenCount,\n            switchScrollingEffect = _this$props5.switchScrollingEffect;\n        var openCount = getOpenCount && getOpenCount();\n\n        if (openCount === 1) {\n          switchScrollingEffect();\n        }\n\n        var widthTransition = \"width \".concat(duration, \" \").concat(ease);\n        var transformTransition = \"transform \".concat(duration, \" \").concat(ease);\n        _this.dom.style.transition = 'none';\n\n        switch (placement) {\n          case 'right':\n            _this.dom.style.transform = \"translateX(-\".concat(right, \"px)\");\n            break;\n\n          case 'top':\n          case 'bottom':\n            _this.dom.style.width = \"calc(100% - \".concat(right, \"px)\");\n            _this.dom.style.transform = 'translateZ(0)';\n            break;\n\n          default:\n            break;\n        }\n\n        clearTimeout(_this.timeout);\n        _this.timeout = setTimeout(function () {\n          if (_this.dom) {\n            _this.dom.style.transition = \"\".concat(transformTransition, \",\").concat(widthTransition);\n            _this.dom.style.width = '';\n            _this.dom.style.transform = '';\n          }\n        });\n      };\n\n      _this.remScrollingEffect = function (right) {\n        var _this$props6 = _this.props,\n            placement = _this$props6.placement,\n            duration = _this$props6.duration,\n            ease = _this$props6.ease,\n            getOpenCount = _this$props6.getOpenCount,\n            switchScrollingEffect = _this$props6.switchScrollingEffect;\n        var openCount = getOpenCount && getOpenCount();\n\n        if (!openCount) {\n          switchScrollingEffect(true);\n        }\n\n        if (transitionStr) {\n          document.body.style.overflowX = 'hidden';\n        }\n\n        _this.dom.style.transition = 'none';\n        var heightTransition;\n        var widthTransition = \"width \".concat(duration, \" \").concat(ease);\n        var transformTransition = \"transform \".concat(duration, \" \").concat(ease);\n\n        switch (placement) {\n          case 'left':\n            {\n              _this.dom.style.width = '100%';\n              widthTransition = \"width 0s \".concat(ease, \" \").concat(duration);\n              break;\n            }\n\n          case 'right':\n            {\n              _this.dom.style.transform = \"translateX(\".concat(right, \"px)\");\n              _this.dom.style.width = '100%';\n              widthTransition = \"width 0s \".concat(ease, \" \").concat(duration);\n\n              if (_this.maskDom) {\n                _this.maskDom.style.left = \"-\".concat(right, \"px\");\n                _this.maskDom.style.width = \"calc(100% + \".concat(right, \"px)\");\n              }\n\n              break;\n            }\n\n          case 'top':\n          case 'bottom':\n            {\n              _this.dom.style.width = \"calc(100% + \".concat(right, \"px)\");\n              _this.dom.style.height = '100%';\n              _this.dom.style.transform = 'translateZ(0)';\n              heightTransition = \"height 0s \".concat(ease, \" \").concat(duration);\n              break;\n            }\n\n          default:\n            break;\n        }\n\n        clearTimeout(_this.timeout);\n        _this.timeout = setTimeout(function () {\n          if (_this.dom) {\n            _this.dom.style.transition = \"\".concat(transformTransition, \",\").concat(heightTransition ? \"\".concat(heightTransition, \",\") : '').concat(widthTransition);\n            _this.dom.style.transform = '';\n            _this.dom.style.width = '';\n            _this.dom.style.height = '';\n          }\n        });\n      };\n\n      _this.getCurrentDrawerSome = function () {\n        return !Object.keys(currentDrawer).some(function (key) {\n          return currentDrawer[key];\n        });\n      };\n\n      _this.getLevelDom = function (_ref) {\n        var level = _ref.level,\n            getContainer = _ref.getContainer;\n\n        if (windowIsUndefined) {\n          return;\n        }\n\n        var container = getContainer && getContainer();\n        var parent = container ? container.parentNode : null;\n        _this.levelDom = [];\n\n        if (level === 'all') {\n          var children = parent ? Array.prototype.slice.call(parent.children) : [];\n          children.forEach(function (child) {\n            if (child.nodeName !== 'SCRIPT' && child.nodeName !== 'STYLE' && child.nodeName !== 'LINK' && child !== container) {\n              _this.levelDom.push(child);\n            }\n          });\n        } else if (level) {\n          dataToArray(level).forEach(function (key) {\n            document.querySelectorAll(key).forEach(function (item) {\n              _this.levelDom.push(item);\n            });\n          });\n        }\n      };\n\n      _this.getHorizontalBoolAndPlacementName = function () {\n        var placement = _this.props.placement;\n        var isHorizontal = placement === 'left' || placement === 'right';\n        var placementName = \"translate\".concat(isHorizontal ? 'X' : 'Y');\n        return {\n          isHorizontal: isHorizontal,\n          placementName: placementName\n        };\n      };\n\n      _this.state = {\n        _self: _assertThisInitialized(_this)\n      };\n      return _this;\n    }\n\n    _createClass(DrawerChild, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        var _this2 = this;\n\n        if (!windowIsUndefined) {\n          var passiveSupported = false;\n\n          try {\n            window.addEventListener('test', null, Object.defineProperty({}, 'passive', {\n              get: function get() {\n                passiveSupported = true;\n                return null;\n              }\n            }));\n          } catch (err) {}\n\n          this.passive = passiveSupported ? {\n            passive: false\n          } : false;\n        }\n\n        var open = this.props.open;\n        this.drawerId = \"drawer_id_\".concat(Number((Date.now() + Math.random()).toString().replace('.', Math.round(Math.random() * 9).toString())).toString(16));\n        this.getLevelDom(this.props);\n\n        if (open) {\n          currentDrawer[this.drawerId] = open; // 默认打开状态时推出 level;\n\n          this.openLevelTransition();\n          this.forceUpdate(function () {\n            _this2.domFocus();\n          });\n        }\n      }\n    }, {\n      key: \"componentDidUpdate\",\n      value: function componentDidUpdate(prevProps) {\n        var open = this.props.open;\n\n        if (open !== prevProps.open) {\n          if (open) {\n            this.domFocus();\n          }\n\n          currentDrawer[this.drawerId] = !!open;\n          this.openLevelTransition();\n        }\n      }\n    }, {\n      key: \"componentWillUnmount\",\n      value: function componentWillUnmount() {\n        var _this$props7 = this.props,\n            getOpenCount = _this$props7.getOpenCount,\n            open = _this$props7.open,\n            switchScrollingEffect = _this$props7.switchScrollingEffect;\n        var openCount = typeof getOpenCount === 'function' && getOpenCount();\n        delete currentDrawer[this.drawerId];\n\n        if (open) {\n          this.setLevelTransform(false);\n          document.body.style.touchAction = '';\n        }\n\n        if (!openCount) {\n          document.body.style.overflow = '';\n          switchScrollingEffect(true);\n        }\n      } // tslint:disable-next-line:member-ordering\n\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _classnames,\n            _this3 = this;\n\n        var _this$props8 = this.props,\n            className = _this$props8.className,\n            children = _this$props8.children,\n            style = _this$props8.style,\n            width = _this$props8.width,\n            height = _this$props8.height,\n            defaultOpen = _this$props8.defaultOpen,\n            $open = _this$props8.open,\n            prefixCls = _this$props8.prefixCls,\n            placement = _this$props8.placement,\n            level = _this$props8.level,\n            levelMove = _this$props8.levelMove,\n            ease = _this$props8.ease,\n            duration = _this$props8.duration,\n            getContainer = _this$props8.getContainer,\n            handler = _this$props8.handler,\n            onChange = _this$props8.onChange,\n            afterVisibleChange = _this$props8.afterVisibleChange,\n            showMask = _this$props8.showMask,\n            maskClosable = _this$props8.maskClosable,\n            maskStyle = _this$props8.maskStyle,\n            onClose = _this$props8.onClose,\n            onHandleClick = _this$props8.onHandleClick,\n            keyboard = _this$props8.keyboard,\n            getOpenCount = _this$props8.getOpenCount,\n            switchScrollingEffect = _this$props8.switchScrollingEffect,\n            props = _objectWithoutProperties(_this$props8, [\"className\", \"children\", \"style\", \"width\", \"height\", \"defaultOpen\", \"open\", \"prefixCls\", \"placement\", \"level\", \"levelMove\", \"ease\", \"duration\", \"getContainer\", \"handler\", \"onChange\", \"afterVisibleChange\", \"showMask\", \"maskClosable\", \"maskStyle\", \"onClose\", \"onHandleClick\", \"keyboard\", \"getOpenCount\", \"switchScrollingEffect\"]); // 首次渲染都将是关闭状态。\n\n\n        var open = this.dom ? $open : false;\n        var wrapperClassName = classnames(prefixCls, (_classnames = {}, _defineProperty(_classnames, \"\".concat(prefixCls, \"-\").concat(placement), true), _defineProperty(_classnames, \"\".concat(prefixCls, \"-open\"), open), _defineProperty(_classnames, className || '', !!className), _defineProperty(_classnames, 'no-mask', !showMask), _classnames));\n\n        var _this$getHorizontalBo2 = this.getHorizontalBoolAndPlacementName(),\n            placementName = _this$getHorizontalBo2.placementName; // 百分比与像素动画不同步，第一次打用后全用像素动画。\n        // const defaultValue = !this.contentDom || !level ? '100%' : `${value}px`;\n\n\n        var placementPos = placement === 'left' || placement === 'top' ? '-100%' : '100%';\n        var transform = open ? '' : \"\".concat(placementName, \"(\").concat(placementPos, \")\");\n        var handlerChildren = handler && React.cloneElement(handler, {\n          onClick: function onClick(e) {\n            if (handler.props.onClick) {\n              handler.props.onClick();\n            }\n\n            if (onHandleClick) {\n              onHandleClick(e);\n            }\n          },\n          ref: function ref(c) {\n            _this3.handlerDom = c;\n          }\n        });\n        return React.createElement(\"div\", Object.assign({}, props, {\n          tabIndex: -1,\n          className: wrapperClassName,\n          style: style,\n          ref: function ref(c) {\n            _this3.dom = c;\n          },\n          onKeyDown: open && keyboard ? this.onKeyDown : undefined,\n          onTransitionEnd: this.onWrapperTransitionEnd\n        }), showMask && React.createElement(\"div\", {\n          className: \"\".concat(prefixCls, \"-mask\"),\n          onClick: maskClosable ? onClose : undefined,\n          style: maskStyle,\n          ref: function ref(c) {\n            _this3.maskDom = c;\n          }\n        }), React.createElement(\"div\", {\n          className: \"\".concat(prefixCls, \"-content-wrapper\"),\n          style: {\n            transform: transform,\n            msTransform: transform,\n            width: isNumeric(width) ? \"\".concat(width, \"px\") : width,\n            height: isNumeric(height) ? \"\".concat(height, \"px\") : height\n          },\n          ref: function ref(c) {\n            _this3.contentWrapper = c;\n          }\n        }, React.createElement(\"div\", {\n          className: \"\".concat(prefixCls, \"-content\"),\n          ref: function ref(c) {\n            _this3.contentDom = c;\n          },\n          onTouchStart: open && showMask ? this.removeStartHandler : undefined,\n          onTouchMove: open && showMask ? this.removeMoveHandler : undefined\n        }, children), handlerChildren));\n      }\n    }], [{\n      key: \"getDerivedStateFromProps\",\n      value: function getDerivedStateFromProps(props, _ref2) {\n        var prevProps = _ref2.prevProps,\n            _self = _ref2._self;\n        var nextState = {\n          prevProps: props\n        };\n\n        if (prevProps !== undefined) {\n          var placement = props.placement,\n              level = props.level;\n\n          if (placement !== prevProps.placement) {\n            // test 的 bug, 有动画过场，删除 dom\n            _self.contentDom = null;\n          }\n\n          if (level !== prevProps.level) {\n            _self.getLevelDom(props);\n          }\n        }\n\n        return nextState;\n      }\n    }]);\n\n    return DrawerChild;\n  }(React.Component);\n\n  DrawerChild.defaultProps = {\n    switchScrollingEffect: function switchScrollingEffect() {}\n  };\n  return DrawerChild;\n}();\n\nexport default DrawerChild;","map":{"version":3,"sources":["/Users/jasmineharris/Desktop/Elite/woto/node_modules/rc-drawer/es/DrawerChild.js"],"names":["_defineProperty","_objectWithoutProperties","_classCallCheck","_createClass","_assertThisInitialized","_inherits","_possibleConstructorReturn","_getPrototypeOf","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","constructor","Reflect","construct","arguments","apply","sham","Proxy","Date","prototype","toString","call","e","classnames","getScrollBarSize","KeyCode","React","addEventListener","dataToArray","getTouchParentScroll","isNumeric","removeEventListener","transformArguments","transitionEnd","transitionStr","windowIsUndefined","currentDrawer","DrawerChild","_React$Component","_super","props","_this","domFocus","dom","focus","removeStartHandler","touches","length","startPos","x","clientX","y","clientY","removeMoveHandler","changedTouches","currentTarget","differX","differY","maskDom","handlerDom","contentDom","target","cancelable","preventDefault","style","transition","onKeyDown","keyCode","ESC","onClose","stopPropagation","onWrapperTransitionEnd","_this$props","open","afterVisibleChange","contentWrapper","propertyName","match","getCurrentDrawerSome","document","body","overflowX","left","width","openLevelTransition","_this$props2","height","_this$getHorizontalBo","getHorizontalBoolAndPlacementName","isHorizontal","placementName","contentValue","getBoundingClientRect","value","setLevelAndScrolling","setLevelTransform","right","_this$props3","placement","levelMove","duration","ease","showMask","levelDom","forEach","concat","levelValue","$levelMove","$value","placementPos","transform","onChange","scrollHeight","window","innerHeight","documentElement","clientHeight","innerWidth","offsetWidth","toggleScrollingToDrawerAndBody","_this$props4","getOpenCount","getContainer","container","openCount","parentNode","eventArray","domArray","overflow","addScrollingEffect","touchAction","item","i","passive","remScrollingEffect","_this$props5","switchScrollingEffect","widthTransition","transformTransition","clearTimeout","timeout","setTimeout","_this$props6","heightTransition","Object","keys","some","key","getLevelDom","_ref","level","parent","children","Array","slice","child","nodeName","push","querySelectorAll","state","_self","componentDidMount","_this2","passiveSupported","defineProperty","get","err","drawerId","Number","now","Math","random","replace","round","forceUpdate","componentDidUpdate","prevProps","componentWillUnmount","_this$props7","render","_classnames","_this3","_this$props8","className","defaultOpen","$open","prefixCls","handler","maskClosable","maskStyle","onHandleClick","keyboard","wrapperClassName","_this$getHorizontalBo2","handlerChildren","cloneElement","onClick","ref","c","createElement","assign","tabIndex","undefined","onTransitionEnd","msTransform","onTouchStart","onTouchMove","getDerivedStateFromProps","_ref2","nextState","Component","defaultProps"],"mappings":"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","sourcesContent":["import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport classnames from 'classnames';\nimport getScrollBarSize from \"rc-util/es/getScrollBarSize\";\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport * as React from 'react';\nimport { addEventListener, dataToArray, getTouchParentScroll, isNumeric, removeEventListener, transformArguments, transitionEnd, transitionStr, windowIsUndefined } from './utils';\nvar currentDrawer = {};\n\nvar DrawerChild =\n/** @class */\nfunction () {\n  var DrawerChild = /*#__PURE__*/function (_React$Component) {\n    _inherits(DrawerChild, _React$Component);\n\n    var _super = _createSuper(DrawerChild);\n\n    function DrawerChild(props) {\n      var _this;\n\n      _classCallCheck(this, DrawerChild);\n\n      _this = _super.call(this, props);\n\n      _this.domFocus = function () {\n        if (_this.dom) {\n          _this.dom.focus();\n        }\n      };\n\n      _this.removeStartHandler = function (e) {\n        if (e.touches.length > 1) {\n          return;\n        }\n\n        _this.startPos = {\n          x: e.touches[0].clientX,\n          y: e.touches[0].clientY\n        };\n      };\n\n      _this.removeMoveHandler = function (e) {\n        if (e.changedTouches.length > 1) {\n          return;\n        }\n\n        var currentTarget = e.currentTarget;\n        var differX = e.changedTouches[0].clientX - _this.startPos.x;\n        var differY = e.changedTouches[0].clientY - _this.startPos.y;\n\n        if ((currentTarget === _this.maskDom || currentTarget === _this.handlerDom || currentTarget === _this.contentDom && getTouchParentScroll(currentTarget, e.target, differX, differY)) && e.cancelable) {\n          e.preventDefault();\n        }\n      };\n\n      _this.transitionEnd = function (e) {\n        var dom = e.target;\n        removeEventListener(dom, transitionEnd, _this.transitionEnd);\n        dom.style.transition = '';\n      };\n\n      _this.onKeyDown = function (e) {\n        if (e.keyCode === KeyCode.ESC) {\n          var onClose = _this.props.onClose;\n          e.stopPropagation();\n\n          if (onClose) {\n            onClose(e);\n          }\n        }\n      };\n\n      _this.onWrapperTransitionEnd = function (e) {\n        var _this$props = _this.props,\n            open = _this$props.open,\n            afterVisibleChange = _this$props.afterVisibleChange;\n\n        if (e.target === _this.contentWrapper && e.propertyName.match(/transform$/)) {\n          _this.dom.style.transition = '';\n\n          if (!open && _this.getCurrentDrawerSome()) {\n            document.body.style.overflowX = '';\n\n            if (_this.maskDom) {\n              _this.maskDom.style.left = '';\n              _this.maskDom.style.width = '';\n            }\n          }\n\n          if (afterVisibleChange) {\n            afterVisibleChange(!!open);\n          }\n        }\n      };\n\n      _this.openLevelTransition = function () {\n        var _this$props2 = _this.props,\n            open = _this$props2.open,\n            width = _this$props2.width,\n            height = _this$props2.height;\n\n        var _this$getHorizontalBo = _this.getHorizontalBoolAndPlacementName(),\n            isHorizontal = _this$getHorizontalBo.isHorizontal,\n            placementName = _this$getHorizontalBo.placementName;\n\n        var contentValue = _this.contentDom ? _this.contentDom.getBoundingClientRect()[isHorizontal ? 'width' : 'height'] : 0;\n        var value = (isHorizontal ? width : height) || contentValue;\n\n        _this.setLevelAndScrolling(open, placementName, value);\n      };\n\n      _this.setLevelTransform = function (open, placementName, value, right) {\n        var _this$props3 = _this.props,\n            placement = _this$props3.placement,\n            levelMove = _this$props3.levelMove,\n            duration = _this$props3.duration,\n            ease = _this$props3.ease,\n            showMask = _this$props3.showMask; // router 切换时可能会导至页面失去滚动条，所以需要时时获取。\n\n        _this.levelDom.forEach(function (dom) {\n          dom.style.transition = \"transform \".concat(duration, \" \").concat(ease);\n          addEventListener(dom, transitionEnd, _this.transitionEnd);\n          var levelValue = open ? value : 0;\n\n          if (levelMove) {\n            var $levelMove = transformArguments(levelMove, {\n              target: dom,\n              open: open\n            });\n            levelValue = open ? $levelMove[0] : $levelMove[1] || 0;\n          }\n\n          var $value = typeof levelValue === 'number' ? \"\".concat(levelValue, \"px\") : levelValue;\n          var placementPos = placement === 'left' || placement === 'top' ? $value : \"-\".concat($value);\n          placementPos = showMask && placement === 'right' && right ? \"calc(\".concat(placementPos, \" + \").concat(right, \"px)\") : placementPos;\n          dom.style.transform = levelValue ? \"\".concat(placementName, \"(\").concat(placementPos, \")\") : '';\n        });\n      };\n\n      _this.setLevelAndScrolling = function (open, placementName, value) {\n        var onChange = _this.props.onChange;\n\n        if (!windowIsUndefined) {\n          var right = document.body.scrollHeight > (window.innerHeight || document.documentElement.clientHeight) && window.innerWidth > document.body.offsetWidth ? getScrollBarSize(true) : 0;\n\n          _this.setLevelTransform(open, placementName, value, right);\n\n          _this.toggleScrollingToDrawerAndBody(right);\n        }\n\n        if (onChange) {\n          onChange(open);\n        }\n      };\n\n      _this.toggleScrollingToDrawerAndBody = function (right) {\n        var _this$props4 = _this.props,\n            getOpenCount = _this$props4.getOpenCount,\n            getContainer = _this$props4.getContainer,\n            showMask = _this$props4.showMask,\n            open = _this$props4.open;\n        var container = getContainer && getContainer();\n        var openCount = getOpenCount && getOpenCount(); // 处理 body 滚动\n\n        if (container && container.parentNode === document.body && showMask) {\n          var eventArray = ['touchstart'];\n          var domArray = [document.body, _this.maskDom, _this.handlerDom, _this.contentDom];\n\n          if (open && document.body.style.overflow !== 'hidden') {\n            if (right) {\n              _this.addScrollingEffect(right);\n            }\n\n            if (openCount === 1) {\n              document.body.style.overflow = 'hidden';\n            }\n\n            document.body.style.touchAction = 'none'; // 手机禁滚\n\n            domArray.forEach(function (item, i) {\n              if (!item) {\n                return;\n              }\n\n              addEventListener(item, eventArray[i] || 'touchmove', i ? _this.removeMoveHandler : _this.removeStartHandler, _this.passive);\n            });\n          } else if (_this.getCurrentDrawerSome()) {\n            // 没有弹框的状态下清除 overflow;\n            if (!openCount) {\n              document.body.style.overflow = '';\n            }\n\n            document.body.style.touchAction = '';\n\n            if (right) {\n              _this.remScrollingEffect(right);\n            } // 恢复事件\n\n\n            domArray.forEach(function (item, i) {\n              if (!item) {\n                return;\n              }\n\n              removeEventListener(item, eventArray[i] || 'touchmove', i ? _this.removeMoveHandler : _this.removeStartHandler, _this.passive);\n            });\n          }\n        }\n      };\n\n      _this.addScrollingEffect = function (right) {\n        var _this$props5 = _this.props,\n            placement = _this$props5.placement,\n            duration = _this$props5.duration,\n            ease = _this$props5.ease,\n            getOpenCount = _this$props5.getOpenCount,\n            switchScrollingEffect = _this$props5.switchScrollingEffect;\n        var openCount = getOpenCount && getOpenCount();\n\n        if (openCount === 1) {\n          switchScrollingEffect();\n        }\n\n        var widthTransition = \"width \".concat(duration, \" \").concat(ease);\n        var transformTransition = \"transform \".concat(duration, \" \").concat(ease);\n        _this.dom.style.transition = 'none';\n\n        switch (placement) {\n          case 'right':\n            _this.dom.style.transform = \"translateX(-\".concat(right, \"px)\");\n            break;\n\n          case 'top':\n          case 'bottom':\n            _this.dom.style.width = \"calc(100% - \".concat(right, \"px)\");\n            _this.dom.style.transform = 'translateZ(0)';\n            break;\n\n          default:\n            break;\n        }\n\n        clearTimeout(_this.timeout);\n        _this.timeout = setTimeout(function () {\n          if (_this.dom) {\n            _this.dom.style.transition = \"\".concat(transformTransition, \",\").concat(widthTransition);\n            _this.dom.style.width = '';\n            _this.dom.style.transform = '';\n          }\n        });\n      };\n\n      _this.remScrollingEffect = function (right) {\n        var _this$props6 = _this.props,\n            placement = _this$props6.placement,\n            duration = _this$props6.duration,\n            ease = _this$props6.ease,\n            getOpenCount = _this$props6.getOpenCount,\n            switchScrollingEffect = _this$props6.switchScrollingEffect;\n        var openCount = getOpenCount && getOpenCount();\n\n        if (!openCount) {\n          switchScrollingEffect(true);\n        }\n\n        if (transitionStr) {\n          document.body.style.overflowX = 'hidden';\n        }\n\n        _this.dom.style.transition = 'none';\n        var heightTransition;\n        var widthTransition = \"width \".concat(duration, \" \").concat(ease);\n        var transformTransition = \"transform \".concat(duration, \" \").concat(ease);\n\n        switch (placement) {\n          case 'left':\n            {\n              _this.dom.style.width = '100%';\n              widthTransition = \"width 0s \".concat(ease, \" \").concat(duration);\n              break;\n            }\n\n          case 'right':\n            {\n              _this.dom.style.transform = \"translateX(\".concat(right, \"px)\");\n              _this.dom.style.width = '100%';\n              widthTransition = \"width 0s \".concat(ease, \" \").concat(duration);\n\n              if (_this.maskDom) {\n                _this.maskDom.style.left = \"-\".concat(right, \"px\");\n                _this.maskDom.style.width = \"calc(100% + \".concat(right, \"px)\");\n              }\n\n              break;\n            }\n\n          case 'top':\n          case 'bottom':\n            {\n              _this.dom.style.width = \"calc(100% + \".concat(right, \"px)\");\n              _this.dom.style.height = '100%';\n              _this.dom.style.transform = 'translateZ(0)';\n              heightTransition = \"height 0s \".concat(ease, \" \").concat(duration);\n              break;\n            }\n\n          default:\n            break;\n        }\n\n        clearTimeout(_this.timeout);\n        _this.timeout = setTimeout(function () {\n          if (_this.dom) {\n            _this.dom.style.transition = \"\".concat(transformTransition, \",\").concat(heightTransition ? \"\".concat(heightTransition, \",\") : '').concat(widthTransition);\n            _this.dom.style.transform = '';\n            _this.dom.style.width = '';\n            _this.dom.style.height = '';\n          }\n        });\n      };\n\n      _this.getCurrentDrawerSome = function () {\n        return !Object.keys(currentDrawer).some(function (key) {\n          return currentDrawer[key];\n        });\n      };\n\n      _this.getLevelDom = function (_ref) {\n        var level = _ref.level,\n            getContainer = _ref.getContainer;\n\n        if (windowIsUndefined) {\n          return;\n        }\n\n        var container = getContainer && getContainer();\n        var parent = container ? container.parentNode : null;\n        _this.levelDom = [];\n\n        if (level === 'all') {\n          var children = parent ? Array.prototype.slice.call(parent.children) : [];\n          children.forEach(function (child) {\n            if (child.nodeName !== 'SCRIPT' && child.nodeName !== 'STYLE' && child.nodeName !== 'LINK' && child !== container) {\n              _this.levelDom.push(child);\n            }\n          });\n        } else if (level) {\n          dataToArray(level).forEach(function (key) {\n            document.querySelectorAll(key).forEach(function (item) {\n              _this.levelDom.push(item);\n            });\n          });\n        }\n      };\n\n      _this.getHorizontalBoolAndPlacementName = function () {\n        var placement = _this.props.placement;\n        var isHorizontal = placement === 'left' || placement === 'right';\n        var placementName = \"translate\".concat(isHorizontal ? 'X' : 'Y');\n        return {\n          isHorizontal: isHorizontal,\n          placementName: placementName\n        };\n      };\n\n      _this.state = {\n        _self: _assertThisInitialized(_this)\n      };\n      return _this;\n    }\n\n    _createClass(DrawerChild, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        var _this2 = this;\n\n        if (!windowIsUndefined) {\n          var passiveSupported = false;\n\n          try {\n            window.addEventListener('test', null, Object.defineProperty({}, 'passive', {\n              get: function get() {\n                passiveSupported = true;\n                return null;\n              }\n            }));\n          } catch (err) {}\n\n          this.passive = passiveSupported ? {\n            passive: false\n          } : false;\n        }\n\n        var open = this.props.open;\n        this.drawerId = \"drawer_id_\".concat(Number((Date.now() + Math.random()).toString().replace('.', Math.round(Math.random() * 9).toString())).toString(16));\n        this.getLevelDom(this.props);\n\n        if (open) {\n          currentDrawer[this.drawerId] = open; // 默认打开状态时推出 level;\n\n          this.openLevelTransition();\n          this.forceUpdate(function () {\n            _this2.domFocus();\n          });\n        }\n      }\n    }, {\n      key: \"componentDidUpdate\",\n      value: function componentDidUpdate(prevProps) {\n        var open = this.props.open;\n\n        if (open !== prevProps.open) {\n          if (open) {\n            this.domFocus();\n          }\n\n          currentDrawer[this.drawerId] = !!open;\n          this.openLevelTransition();\n        }\n      }\n    }, {\n      key: \"componentWillUnmount\",\n      value: function componentWillUnmount() {\n        var _this$props7 = this.props,\n            getOpenCount = _this$props7.getOpenCount,\n            open = _this$props7.open,\n            switchScrollingEffect = _this$props7.switchScrollingEffect;\n        var openCount = typeof getOpenCount === 'function' && getOpenCount();\n        delete currentDrawer[this.drawerId];\n\n        if (open) {\n          this.setLevelTransform(false);\n          document.body.style.touchAction = '';\n        }\n\n        if (!openCount) {\n          document.body.style.overflow = '';\n          switchScrollingEffect(true);\n        }\n      } // tslint:disable-next-line:member-ordering\n\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _classnames,\n            _this3 = this;\n\n        var _this$props8 = this.props,\n            className = _this$props8.className,\n            children = _this$props8.children,\n            style = _this$props8.style,\n            width = _this$props8.width,\n            height = _this$props8.height,\n            defaultOpen = _this$props8.defaultOpen,\n            $open = _this$props8.open,\n            prefixCls = _this$props8.prefixCls,\n            placement = _this$props8.placement,\n            level = _this$props8.level,\n            levelMove = _this$props8.levelMove,\n            ease = _this$props8.ease,\n            duration = _this$props8.duration,\n            getContainer = _this$props8.getContainer,\n            handler = _this$props8.handler,\n            onChange = _this$props8.onChange,\n            afterVisibleChange = _this$props8.afterVisibleChange,\n            showMask = _this$props8.showMask,\n            maskClosable = _this$props8.maskClosable,\n            maskStyle = _this$props8.maskStyle,\n            onClose = _this$props8.onClose,\n            onHandleClick = _this$props8.onHandleClick,\n            keyboard = _this$props8.keyboard,\n            getOpenCount = _this$props8.getOpenCount,\n            switchScrollingEffect = _this$props8.switchScrollingEffect,\n            props = _objectWithoutProperties(_this$props8, [\"className\", \"children\", \"style\", \"width\", \"height\", \"defaultOpen\", \"open\", \"prefixCls\", \"placement\", \"level\", \"levelMove\", \"ease\", \"duration\", \"getContainer\", \"handler\", \"onChange\", \"afterVisibleChange\", \"showMask\", \"maskClosable\", \"maskStyle\", \"onClose\", \"onHandleClick\", \"keyboard\", \"getOpenCount\", \"switchScrollingEffect\"]); // 首次渲染都将是关闭状态。\n\n\n        var open = this.dom ? $open : false;\n        var wrapperClassName = classnames(prefixCls, (_classnames = {}, _defineProperty(_classnames, \"\".concat(prefixCls, \"-\").concat(placement), true), _defineProperty(_classnames, \"\".concat(prefixCls, \"-open\"), open), _defineProperty(_classnames, className || '', !!className), _defineProperty(_classnames, 'no-mask', !showMask), _classnames));\n\n        var _this$getHorizontalBo2 = this.getHorizontalBoolAndPlacementName(),\n            placementName = _this$getHorizontalBo2.placementName; // 百分比与像素动画不同步，第一次打用后全用像素动画。\n        // const defaultValue = !this.contentDom || !level ? '100%' : `${value}px`;\n\n\n        var placementPos = placement === 'left' || placement === 'top' ? '-100%' : '100%';\n        var transform = open ? '' : \"\".concat(placementName, \"(\").concat(placementPos, \")\");\n        var handlerChildren = handler && React.cloneElement(handler, {\n          onClick: function onClick(e) {\n            if (handler.props.onClick) {\n              handler.props.onClick();\n            }\n\n            if (onHandleClick) {\n              onHandleClick(e);\n            }\n          },\n          ref: function ref(c) {\n            _this3.handlerDom = c;\n          }\n        });\n        return React.createElement(\"div\", Object.assign({}, props, {\n          tabIndex: -1,\n          className: wrapperClassName,\n          style: style,\n          ref: function ref(c) {\n            _this3.dom = c;\n          },\n          onKeyDown: open && keyboard ? this.onKeyDown : undefined,\n          onTransitionEnd: this.onWrapperTransitionEnd\n        }), showMask && React.createElement(\"div\", {\n          className: \"\".concat(prefixCls, \"-mask\"),\n          onClick: maskClosable ? onClose : undefined,\n          style: maskStyle,\n          ref: function ref(c) {\n            _this3.maskDom = c;\n          }\n        }), React.createElement(\"div\", {\n          className: \"\".concat(prefixCls, \"-content-wrapper\"),\n          style: {\n            transform: transform,\n            msTransform: transform,\n            width: isNumeric(width) ? \"\".concat(width, \"px\") : width,\n            height: isNumeric(height) ? \"\".concat(height, \"px\") : height\n          },\n          ref: function ref(c) {\n            _this3.contentWrapper = c;\n          }\n        }, React.createElement(\"div\", {\n          className: \"\".concat(prefixCls, \"-content\"),\n          ref: function ref(c) {\n            _this3.contentDom = c;\n          },\n          onTouchStart: open && showMask ? this.removeStartHandler : undefined,\n          onTouchMove: open && showMask ? this.removeMoveHandler : undefined\n        }, children), handlerChildren));\n      }\n    }], [{\n      key: \"getDerivedStateFromProps\",\n      value: function getDerivedStateFromProps(props, _ref2) {\n        var prevProps = _ref2.prevProps,\n            _self = _ref2._self;\n        var nextState = {\n          prevProps: props\n        };\n\n        if (prevProps !== undefined) {\n          var placement = props.placement,\n              level = props.level;\n\n          if (placement !== prevProps.placement) {\n            // test 的 bug, 有动画过场，删除 dom\n            _self.contentDom = null;\n          }\n\n          if (level !== prevProps.level) {\n            _self.getLevelDom(props);\n          }\n        }\n\n        return nextState;\n      }\n    }]);\n\n    return DrawerChild;\n  }(React.Component);\n\n  DrawerChild.defaultProps = {\n    switchScrollingEffect: function switchScrollingEffect() {}\n  };\n  return DrawerChild;\n}();\n\nexport default DrawerChild;"]},"metadata":{},"sourceType":"module"}